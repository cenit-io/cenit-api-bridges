<% content_for :head do %>
  <script type="text/javascript">
    $(document).ready(function () {
      $('form').on('submit', function (e) {
        e.preventDefault();
        window.location = `<%= params[:redirect_uri] %>?${$('form').serialize()}`;
      })
    });
  </script>
<% end %>

<% content_for :breadcrumb do %>
  <span>Authorization Headers and Parameters:</span>
<% end %>

<% content_for :content do %>
  <form>
    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6">
        <div class="row">
          <div class="alert alert-danger" role="alert" style="display: none">...</div>
        </div>

        <% fields.each do |field| %>
          <div class="row">
            <div class="form-group">
              <%= label_tag field[:name], field[:label], title: field[:description] %>
              <%= text_field_tag field[:name], nil, class: 'form-control', required: true, value: '' %>
            </div>
          </div>
        <% end %>

      </div>
    </div>

    <hr/>

    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6 actions">
        <%= submit_tag 'Authorize', class: 'btn btn-primary' %>
      </div>
    </div>
  </form>
<% end %>